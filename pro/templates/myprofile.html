{% extends 'professional_layout.html' %}
{% load static %}



    <!-- Breadcrumb -->
{% block professional_breadcrumb %}
    <div class="alice-bg padding-top-70 padding-bottom-70">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="breadcrumb-area">
                        <h1>Profile Details</h1>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Profile Details</li>
                            </ol>
                        </nav>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="breadcrumb-form">
                        <form action="#">
                            <input type="text" placeholder="Enter Keywords">
                            <button><i data-feather="search"></i></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb End -->
{% endblock %}


{% block professional_block %}
                            <div class="download-resume dashboard-section">
                                <a href="#">Download CV<i data-feather="download"></i></a>
                                <a href="#">Download Cover Letter<i data-feather="download"></i></a>
                            </div>
                            <div class="skill-and-profile dashboard-section">
                                <div class="skill">
                                    <label>Skills:</label>
                                </div>
                                <div class="social-profile">
                                    <label>Social:</label>

                                    <a href="#" id="facebook"><i class="fab fa-facebook-f" ></i></a>
                                    <a href="#" id="twitter"><i class="fab fa-twitter" ></i></a>
                                    <a href="#" id="linkedin"><i class="fab fa-linkedin-in" ></i></a>

                                </div>
                            </div>
                            <div class="about-details details-section dashboard-section">
                                <h4><i data-feather="align-left"></i>About Me</h4>
                                <div class="pro_about">
                                </div>
                                <div class="information-and-contact">
                                    <div class="information">
                                        <h4>Information</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="edication-background details-section dashboard-section" id="edu">
                                <h4><i data-feather="book"></i>Education Background</h4>
                            </div>
                            <div class="experience dashboard-section details-section" id="work">
                                <h4><i data-feather="briefcase"></i>Work Experiance</h4>
                            </div>

                            <div class="professonal-skill dashboard-section details-section">
                                <h4><i data-feather="feather"></i>Professional Skill</h4>

                                <div class="progress-group" id="pro_skill">
                                </div>
                            </div>

                            <div class="portfolio dashboard-section details-section" id="pro_portfolio">
                                <h4><i data-feather="gift"></i>Portfolio</h4>
                            </div>


                            <div class="personal-information dashboard-section last-child details-section" id="details">
                                <h4><i data-feather="user-plus"></i>Personal Deatils</h4>
                            </div>
{% endblock %}

{% block extra_js %}
    <script>
        $(document).ready(function() {
            $('.profile-details-bar').addClass('active')
            initAjaxSelects();
            $('#profile-form').validate();
            var path = window.location.pathname.split('/');
            var id = path[path.length-2];

            var getUrl = '/api/professional/profile/'+ id + '/';
            get(getUrl, loadProfile);

            initAjaxForms();

        });

        function loadProfile(data){




            //profile picture shows

            // $('#pro_pic').append('<img src="'+data.personal_info.image+'" class="img-fluid" alt="">');

            $('#pro_pic').append('<img src="'+data.personal_info.image+'" class="img-fluid" alt="">');

            //            console.log(data.personal_info.image)
            //        $('#pro_pic').append('<img src="{% static 'images/icon-114x114.png'%}" class="img-fluid" alt="">');





            //social link shows

            facebook = 'http://facebook.com/'+data.personal_info.facebook_id;
            twitter  = 'http://twitter.com/'+data.personal_info.twitter_id;
            linkedin = 'http://linkedin.com/'+data.personal_info.linkedin_id;
            $('#facebook').attr('href',facebook);
            $('#twitter').attr('href',twitter);
            $('#linkedin').attr('href', linkedin);


            //skills show

            skill_info = data['skill_info']
            len = skill_info.length;
            for(x=0;x<len;x++){
                $('.skill').append('<a href="#">'+skill_info[x].skill_obj.name+'</a>');
            }


            //about info show

            function getAge(dateString)
            {
                var today = new Date();
                var birthDate = new Date(dateString);
                var age = today.getFullYear() - birthDate.getFullYear();
                var m = today.getMonth() - birthDate.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate()))
                {
                    age--;
                }
                return age;
            }
            var pro_age = getAge(data.personal_info.date_of_birth)
            var about_html='<p>'+data.personal_info.about_me+'</p>';
            $(".pro_about").html(about_html);
            var info_html = '<h4>Information</h4>'+
                '<ul>'+
                '<li><span>Category:</span> '+data.personal_info.industry_expertise+'</li>'+
                '<li><span>Location:</span> '+data.personal_info.address+'</li>'+
                '<li><span>Status:</span>'+data.personal_info.status+'</li>'+
                '<li><span>Experience:</span>'+data.personal_info.experience+'</li>'+
                '<li><span>Salary:</span> '+data.personal_info.expected_salary_min+' - '+data.personal_info.expected_salary_max+'</li>'+
                '<li><span>Gender:</span>'+data.personal_info.gender+'</li>'+
                '<li><span>Age:</span>'+pro_age+' Year(s)</li>'+
                '<li><span>Qualification:</span>'+data.personal_info.qualification+'</li>'+
                '</ul>';
            $(".information").html(info_html);


            //education info show

            edu_data = data['edu_info']
            len = edu_data.length;
            for(x=0;x<len;x++){
                var edu_html='<div class="education-label">'+
                    '<span class="study-year">'+edu_data[x].enrolled_date+' - '+edu_data[x].graduation_date+'</span>'+
                    '<h5>'+edu_data[x].degree+'<span>@'+edu_data[x].institution_obj.name+'</span></h5>'+
                    '<p>'+edu_data[x].institution_text+'</p>'+
                    '<p><b>'+edu_data[x].major_obj.name+'</b> - '+edu_data[x].cgpa+'</p>'+
                    '<p>'+edu_data[x].major_text+'</p>'+
                    '</div><br>';
                $('#edu').append(edu_html);
            }


            //work experience info show

            work_data = data.experience_info
            len = work_data.length;
            for(x=0;x<len;x++){
                var work_html='<div class="experience-section">'+
                    '<span class="service-year">'+work_data[x].start_date+'-'+work_data[x].end_date+'</span>'+
                    '<h5>'+work_data[x].designation+'<span>@'+work_data[x].company+'</span></h5>'+
                    '<p>'+work_data[x].company_text+'</p>'+
                    '</div><br>';
                $('#work').append(work_html);
            }


            //Professional Skill info show

            pro_skill_data = data['skill_info']
            len = pro_skill_data.length;
            for(x=0;x<len;x++){
                var pro_skill_html='<div class="progress-item">'+
                    '<div class="progress-head">'+
                    '<p class="progress-on">'+pro_skill_data[x].skill_obj.name+'</p>'+
                    '</div>'+
                    '<div class="progress-body">'+
                    '<div class="progress">'+
                    '<div class="progress-bar" role="progressbar" aria-valuenow="'+pro_skill_data[x].rating+'" aria-valuemin="0" aria-valuemax="10" style="width: 0;"></div>'+
                    '</div>'+
                    '<p class="progress-to">'+pro_skill_data[x].rating+'/10</p>'+
                    '</div>'+
                    '</div>';

                $('#pro_skill').append(pro_skill_html);
            }






            //portfolio show


            portfolio_data = data.portfolio_info
            len = portfolio_data.length;
            var content= '<div class="portfolio-slider owl-carousel" id="pro_portfolio">';
            for(x=0;x<len;x++){
                var portfolio_html= '<div class="portfolio-item">'+

                    //'<img src="{% static 'images/icon-114x114.png'%}" class="img-fluid" alt="">'+
            '<img src="{% static 'images/icon-114x114.png'%}" class="img-fluid" alt="">'+

                    '<img src="'+portfolio_data[x].image+'" class="img-fluid" alt="">'+
                    '<div class="overlay">'+
                    '<a><p>'+portfolio_data[x].name+'</p></i></a>'+
                    '</div>'+
                    '<div><p>'+portfolio_data[x].description+'</p></div>'+
                    '</div>';
                          //       '<img src="'+portfolio_data[x].image+'" class="img-fluid" alt="">'+
                                 '<div class="overlay">'+
                                 '<a><p>'+portfolio_data[x].name+'</p></i></a>'+
                                 '</div>'+
                                 '<div><p>'+portfolio_data[x].description+'</p></div>'+
                                 '</div>';

                content = content + portfolio_html;                                     }
            content = content + '</div>';
            $('#pro_portfolio').append(content);
            $('.owl-carousel').owlCarousel({loop:true,nav:true});



            //personal details show
            var dateofbirth = data.personal_info.date_of_birth
            var momentObj = moment(dateofbirth, 'YYYY-MM-DD');
            var dateMomentString = momentObj.format('DD-MM-YYYY');
            var detail_html = '<ul>'+
                '<li><span>Full Name:</span> '+ data.personal_info.full_name+'</li>'+
                '<li><span>Fathers Name:</span> '+data.personal_info.father_name+'</li>'+
                '<li><span>Mothers Name:</span>'+ data.personal_info.mother_name+'</li>'+
                '<li><span>Date of Birth:</span>'+dateMomentString+'</li>'+
                '<li><span>Nationality:</span> '+data.personal_info.nationality_obj.name+'</li>'+
                '<li><span>Gender:</span>'+data.personal_info.gender+'</li>'+
                '<li><span>Address:</span>'+data.personal_info.permanent_address+'</li>'+
                '</ul>';
            $("#details").append(detail_html);











        }


    </script>
{% endblock %}